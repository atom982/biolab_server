webpackJsonp([73],{"710t":function(t,i,e){"use strict";var a=e("1wn0");i.a={name:"UgovorUnos",computed:{filterItems:function(){var t=this,i=[];return this.proizvodi.forEach(function(t){i.push(t)}),this.inputValue.length>=1?i.filter(function(i){return-1!==i.LN.toUpperCase().search(t.inputValue.toUpperCase())||-1!==i.opis.toUpperCase().search(t.inputValue.toUpperCase())}):i}},data:function(){return{inputValue:"",dobavljac:"",dobavljaci:[],dobavljaci_select:[],dobavljac_id:"",proizvodi:[],stavke:[],cbxDobavljac:!1,cbxKlijent:!1,klijent:"",za_klijenta:"",klijenti:[],klijenti_select:[],klijent_id:"",za_klijenta_id:"",isDisabled:!1,cijenek:[],cijened:[],toastDuration:2500}},watch:{cbxDobavljac:function(){this.cbxDobavljac&&(this.cbxKlijent=!1,this.dobavljac="")},cbxKlijent:function(){this.cbxKlijent&&(this.cbxDobavljac=!1,this.klijent="")},klijent:function(){var t=this;this.isDisabled=!0,this.klijenti_select.forEach(function(i){i.naziv===t.klijent&&(t.klijent_id=i._id)}),a.q.get("/inventar/listcijenek?token="+this.$store.state.token+"&site="+this.$store.state.site+"&klijent="+this.klijent_id,{}).then(function(i){i.data.success&&(console.log("cijene k"),console.log(i.data),t.cijenek=i.data.produkti)})},za_klijenta:function(){var t=this;this.isDisabled=!0,this.klijenti_select.forEach(function(i){i.naziv===t.za_klijenta&&(t.za_klijenta_id=i._id)})},dobavljac:function(){var t=this;this.isDisabled=!0,this.klijenti_select.forEach(function(i){i.default&&(t.za_klijenta=i.naziv,t.za_klijenta_id=i._id)}),this.dobavljaci_select.forEach(function(i){i.naziv===t.dobavljac&&(t.dobavljac_id=i._id)}),a.q.get("/inventar/listcijened?token="+this.$store.state.token+"&site="+this.$store.state.site+"&dobavljac="+this.dobavljac_id,{}).then(function(i){i.data.success&&(console.log("cijene d"),console.log(i.data),t.cijened=i.data.produkti)})}},methods:{clear:function(t){this[t]=""},Add:function(t){var i=this;if(t.kolicina="",this.cbxDobavljac){var e=!1;this.cijened.forEach(function(a){a.produkt.LN===t.LN&&a.za_klijenta===i.za_klijenta_id&&(e=!0)}),e?(this.toastText="Cijena već definisana. Koristite pregled za izmjenu!",this.toastIcon="fa-warning",this.toastPosition="top-right",this.className="vuestic-toast-warning",this.showToast(this.toastText,{icon:this.toastIcon,position:this.toastPosition,duration:this.toastDuration,fullWidth:this.isToastFullWidth,className:this.className})):this.stavke.unshift(t)}if(this.cbxKlijent){var a=!1;this.cijenek.forEach(function(i){i.produkt.LN===t.LN&&(a=!0)}),a?(this.toastText="Cijena već definisana. Koristite pregled za izmjenu!",this.toastIcon="fa-warning",this.toastPosition="top-right",this.className="vuestic-toast-warning",this.showToast(this.toastText,{icon:this.toastIcon,position:this.toastPosition,duration:this.toastDuration,fullWidth:this.isToastFullWidth,className:this.className})):this.stavke.unshift(t)}},Save:function(){var t=this;console.log("sacuvaj");var i=[];this.cbxDobavljac&&(this.dobavljaci_select.forEach(function(i){i.naziv===t.dobavljac&&(t.dobavljac_id=i._id)}),this.stavke.forEach(function(e){i.push({produkt:e._id,dobavljac:t.dobavljac_id,klijent:t.za_klijenta_id,cijena:e.cijena,site:t.$store.state.site})}),console.log(i),a.q.post("inventar/createcijened",{cijene:i,token:this.$store.state.token,site:this.$store.state.site}).then(function(i){i.data.success&&(console.log(i.data),t.cijene=[],t.stavke=[],t.isDisabled=!1,t.inputValue="",t.cbxDobavljac=!1,t.cbxKlijent=!1)})),this.cbxKlijent&&(this.klijenti_select.forEach(function(i){i.naziv===t.klijent&&(t.klijent_id=i._id)}),this.stavke.forEach(function(e){i.push({produkt:e._id,klijent:t.klijent_id,cijena:e.cijena,site:t.$store.state.site})}),console.log(i),a.q.post("inventar/createcijenek",{cijene:i,token:this.$store.state.token,site:this.$store.state.site}).then(function(i){i.data.success&&(console.log(i.data),t.cijene=[],t.stavke=[],t.isDisabled=!1,t.inputValue="",t.cbxDobavljac=!1,t.cbxKlijent=!1,t.cijene=t.cijene.splice(0,t.cijene.length-1))}))}},created:function(){var t=this;this.$nextTick(function(){t.$validator.validateAll()}),a.q.get("inventar/listdobavljac?token="+this.$store.state.token+"&site="+this.$store.state.site,{}).then(function(i){i.data.success&&(t.dobavljaci_select=i.data.dobavljaci,i.data.dobavljaci.forEach(function(i){t.dobavljaci.push(i.naziv)}))}),a.q.get("inventar/listklijenti?token="+this.$store.state.token+"&site="+this.$store.state.site,{}).then(function(i){i.data.success&&(t.klijenti_select=i.data.klijenti,i.data.klijenti.forEach(function(i){t.klijenti.push(i.naziv)}))}),a.q.get("/inventar/listprodukti?token="+this.$store.state.token+"&site="+this.$store.state.site,{}).then(function(i){i.data.success&&(t.proizvodi=i.data.proizvodi)})}}},"9Ccq":function(t,i,e){i=t.exports=e("FZ+f")(!0),i.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"unos.vue",sourceRoot:""}])},c4Wi:function(t,i,e){"use strict";function a(t){e("mFK7")}Object.defineProperty(i,"__esModule",{value:!0});var s=e("710t"),n=e("ibvV"),o=e("VU/8"),c=a,l=o(s.a,n.a,!1,c,"data-v-6b1bba6d",null);i.default=l.exports},ibvV:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"notifications-page",staticStyle:{"min-height":"500px"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("form",{attrs:{action:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("vuestic-checkbox",{attrs:{label:"Dobavljac",id:"cbxDobavljac",disabled:t.isDisabled},model:{value:t.cbxDobavljac,callback:function(i){t.cbxDobavljac=i},expression:"cbxDobavljac"}})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("vuestic-checkbox",{attrs:{label:"Klijent",id:"cbxKlijent",disabled:t.isDisabled},model:{value:t.cbxKlijent,callback:function(i){t.cbxKlijent=i},expression:"cbxKlijent"}})],1)]),t._v(" "),t.cbxDobavljac?e("vuestic-simple-select",{ref:"dobavljacSelect",attrs:{label:"Izaberite dobavljača",name:"dobavljac",required:!0,title:" ",options:t.dobavljaci},model:{value:t.dobavljac,callback:function(i){t.dobavljac=i},expression:"dobavljac"}}):t._e(),t._v(" "),t.cbxKlijent?e("vuestic-simple-select",{ref:"klijentSelect",attrs:{label:"Izaberite klijenta",name:"klijent",required:!0,title:" ",options:t.klijenti},model:{value:t.klijent,callback:function(i){t.klijent=i},expression:"klijent"}}):t._e(),t._v(" "),t.cbxDobavljac?e("vuestic-simple-select",{ref:"zaklijentaSelect",attrs:{label:"Za Klijenta",name:"zaklijenta",required:!0,title:" ",options:t.klijenti},model:{value:t.za_klijenta,callback:function(i){t.za_klijenta=i},expression:"za_klijenta"}}):t._e(),t._v(" "),t.cbxDobavljac||t.cbxKlijent?e("div",{staticClass:"form-group with-icon-right"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isDisabled,expression:"isDisabled"}],staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{id:"clear-input",name:"clear-input",required:""},domProps:{value:t.inputValue},on:{input:function(i){i.target.composing||(t.inputValue=i.target.value)}}}),t._v(" "),e("i",{staticClass:"fa fa-times icon-right input-icon pointer",on:{click:function(i){t.clear("inputValue")}}}),t._v(" "),e("label",{staticClass:"control-label",attrs:{for:"clear-input",role:"button"}},[t._v(t._s("Traži proizvod"))]),e("i",{staticClass:"bar"}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.proizvodi.length,expression:"proizvodi.length"}],staticClass:"vuestic-page-not-found-search__wallpaper vuestic-page-not-found-search__not-found-wallpaper-list"},[e("div",{staticClass:"vuestic-page-not-found-search__wrapper",style:{"grid-template-columns":"repeat(1, 1fr)"}},[e("ul",{staticClass:"vuestic-page-not-found-search__list",staticStyle:{color:"#f7cc36"}},t._l(t.filterItems,function(i,a){return t.inputValue.length?e("li",{directives:[{name:"show",rawName:"v-show",value:a<10,expression:"index < 10"}],key:a,staticClass:"vuestic-page-not-found-search__list-element"},[e("a",{class:{"unchosen-link":!0,"plain-link":!1},attrs:{id:i._id,href:"#"},on:{click:function(e){e.preventDefault(),t.Add(i)}}},[t._v(t._s(i.LN)+" | "+t._s(i.opis))])]):t._e()}))])])])]):t._e(),t._v(" "),e("div",{staticClass:"form-group with-icon-left"},[e("button",{staticClass:"btn btn-secondary-info btn-micro",attrs:{title:"",id:"SacuvajUlazc"},on:{click:function(i){i.preventDefault(),t.Save()}}},[e("span",{staticClass:"fa fa-flask",staticStyle:{"font-size":"12px"},attrs:{id:"SacuvajUlazc"}}),t._v(" "),e("span",{staticStyle:{"text-transform":"none","font-size":"12px"}},[t._v("Sacuvaj")])])])],1),t._v(" "),e("div",{staticClass:"col-md-8"},[t.stavke.length?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped first-td-padding"},[e("thead",[e("tr",[e("td",{attrs:{width:"20%"}},[t._v(t._s("LN"))]),t._v(" "),e("td",{attrs:{width:"15%"}},[t._v(t._s("Opis"))]),t._v(" "),e("td",{attrs:{width:"20%"}},[t._v(t._s("Cijena"))]),t._v(" "),e("td",{attrs:{align:"center",width:"15%"}},[t._v(t._s("Uredi"))]),t._v(" "),e("td",{attrs:{align:"center",width:"15%"}},[t._v(t._s("Akcija"))])])]),t._v(" "),e("tbody",t._l(t.stavke,function(i){return e("tr",{key:i.LN},[e("td",[t._v(t._s(i.LN))]),t._v(" "),e("td",[t._v(t._s(i.opis))]),t._v(" "),e("td",[e("div",{staticStyle:{display:"inline"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.cijena,expression:"element.cijena"}],staticStyle:{width:"110px","font-size":"12px","line-height":"7px"},domProps:{value:i.cijena},on:{input:function(e){e.target.composing||t.$set(i,"cijena",e.target.value)}}})])]),t._v(" "),e("td",{attrs:{align:"center"}},[e("i",{staticClass:"vuestic-icon vuestic-icon-settings",staticStyle:{"font-size":"12px",color:"#4ae387"},attrs:{id:i._id},on:{click:function(e){t.EditJson("Ugovor",i)}}})]),t._v(" "),e("td",{attrs:{align:"center"}},[e("i",{staticClass:"fa fa-trash-o",staticStyle:{color:"#4ae387"},attrs:{id:i._id},on:{dblclick:function(e){e.preventDefault(),t.UgovorDelete(e,i)}}})])])}))])]):t._e()])])])])])])},s=[],n={render:a,staticRenderFns:s};i.a=n},mFK7:function(t,i,e){var a=e("9Ccq");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("33896534",a,!0)}});
//# sourceMappingURL=73.d76b05283c487d159bf1.js.map
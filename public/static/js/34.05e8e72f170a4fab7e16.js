webpackJsonp([34,66],{"1Foo":function(t,a,e){a=t.exports=e("FZ+f")(!0),a.push([t.i,".circle[data-v-4339f668]{width:.4rem;height:.4rem;border-radius:50%;display:inline-block}","",{version:3,sources:["C:/Users/atom/Desktop/atom.podrska@gmail/BioLAB/biolab_client/src/components/kontrole/pregled/BadgeColumn.vue"],names:[],mappings:"AACA,yBACE,YAAc,AACd,aAAe,AACf,kBAAmB,AACnB,oBAAsB,CACvB",file:"BadgeColumn.vue",sourcesContent:["\n.circle[data-v-4339f668] {\n  width: 0.4rem;\n  height: 0.4rem;\n  border-radius: 50%;\n  display: inline-block;\n}\n"],sourceRoot:""}])},"4Q5r":function(t,a,e){var o=e("sILS");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("575c32cf",o,!0)},"5dur":function(t,a,e){"use strict";a.a={name:"badgeColumn",props:{rowData:{type:Object,required:!0},rowIndex:{type:Number}},data:function(){return{classObject:{"badge-warning":this.rowIndex%6==0,"badge-primary":this.rowIndex%6==1,"badge-danger":this.rowIndex%6==2,"badge-info":this.rowIndex%6==3,"badge-violet":this.rowIndex%6==4,"badge-dark-blue":this.rowIndex%6==5}}}}},"8EEf":function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement;return(t._self._c||a)("span",{staticClass:"circle",class:t.classObject})},s=[],n={render:o,staticRenderFns:s};a.a=n},SWvW:function(t,a,e){"use strict";function o(t){e("hV83")}Object.defineProperty(a,"__esModule",{value:!0});var s=e("5dur"),n=e("8EEf"),i=e("VU/8"),r=o,l=i(s.a,n.a,!1,r,"data-v-4339f668",null);a.default=l.exports},"UqI+":function(t,a,e){var o,s,n;!function(e,i){s=[],o=i,void 0!==(n="function"==typeof o?o.apply(a,s):o)&&(t.exports=n)}(0,function(){"use strict";if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var t,a,e,o,s,n,i,r,l,c,d,u=window.navigator.userAgent,p=void 0!==navigator.mimeTypes["application/pdf"],f=function(){return void 0!==window.Promise}(),h=function(){return-1!==u.indexOf("irefox")}(),v=function(){return!!h&&parseInt(u.split("rv:")[1].split(".")[0],10)>18}(),b=function(){return/iphone|ipad|ipod/i.test(u.toLowerCase())}();return o=function(t){var a;try{a=new ActiveXObject(t)}catch(t){a=null}return a},a=function(){return!!(window.ActiveXObject||"ActiveXObject"in window)},e=function(){return!(!o("AcroPDF.PDF")&&!o("PDF.PdfCtrl"))},t=!b&&(v||p||a()&&e()),s=function(t){var a,e="";if(t){for(a in t)t.hasOwnProperty(a)&&(e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&");e&&(e="#"+e,e=e.slice(0,e.length-1))}return e},n=function(t){"undefined"!=typeof console&&console.log&&console.log("[PDFObject] "+t)},i=function(t){return n(t),!1},l=function(t){var a=document.body;return"string"==typeof t?a=document.querySelector(t):"undefined"!=typeof jQuery&&t instanceof jQuery&&t.length?a=t.get(0):void 0!==t.nodeType&&1===t.nodeType&&(a=t),a},c=function(t,a,e,o,s){var n=o+"?file="+encodeURIComponent(a)+e,i=b?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ",r="<div style='"+i+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+s+" src='"+n+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return t.className+=" pdfobject-container",t.style.position="relative",t.style.overflow="auto",t.innerHTML=r,t.getElementsByTagName("iframe")[0]},d=function(t,a,e,o,s,n,i){var r="";return r=a&&a!==document.body?"width: "+s+"; height: "+n+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",t.className+=" pdfobject-container",t.innerHTML="<embed "+i+" class='pdfobject' src='"+e+o+"' type='application/pdf' style='overflow: auto; "+r+"'/>",t.getElementsByTagName("embed")[0]},r=function(a,e,o){if("string"!=typeof a)return i("URL is not valid");e=void 0!==e&&e,o=void 0!==o?o:{};var n=o.id&&"string"==typeof o.id?"id='"+o.id+"'":"",r=!!o.page&&o.page,u=o.pdfOpenParams?o.pdfOpenParams:{},p=void 0===o.fallbackLink||o.fallbackLink,h=o.width?o.width:"100%",v=o.height?o.height:"100%",m="boolean"!=typeof o.assumptionMode||o.assumptionMode,g="boolean"==typeof o.forcePDFJS&&o.forcePDFJS,_=!!o.PDFJS_URL&&o.PDFJS_URL,k=l(e),A="",w="";return k?(r&&(u.page=r),w=s(u),g&&_?c(k,a,w,_,n):t||m&&f&&!b?d(k,e,a,w,h,v,n):_?c(k,a,w,_,n):(p&&(A="string"==typeof p?p:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",k.innerHTML=A.replace(/\[url\]/g,a)),i("This browser does not support embedded PDFs"))):i("Target element cannot be determined")},{embed:function(t,a,e){return r(t,a,e)},pdfobjectversion:"2.1.1",supportsPDFs:function(){return t}()}})},"aO/P":function(t,a,e){"use strict";function o(t){e("4Q5r")}Object.defineProperty(a,"__esModule",{value:!0});var s=e("oWB1"),n=e("k546"),i=e("VU/8"),r=o,l=i(s.a,n.a,!1,r,"data-v-7be5bf00",null);a.default=l.exports},hV83:function(t,a,e){var o=e("1Foo");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("45191d25",o,!0)},k546:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"collapse-page"},[e("div",{staticClass:"flex md12"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.main&&t.pdf,expression:"!main && pdf"}]},[e("div",{staticClass:"btn-container"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"btn btn-secondary btn-sm",on:{click:function(a){a.preventDefault(),t.Nazad()}}},[e("span",{staticClass:"fa fa-step-backward"}),t._v("\n          "+t._s(" NAZAD")+"\n        ")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"btn btn-secondary btn-sm pull-right",attrs:{disabled:!0},on:{click:function(a){a.preventDefault(),t.MailDialog()}}},[e("span",{staticClass:"glyphicon glyphicon-send"}),t._v("\n          "+t._s(" Pošalji")+"\n        ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"form-group with-icon-left pull-right"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{size:"40",id:"input-icon-left",name:"input-icon-left",title:" ",required:""},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),t._v(" "),e("i",{staticClass:"fa fa-envelope-o icon-left input-icon"}),t._v(" "),e("label",{staticClass:"control-label",attrs:{for:"input-icon-left"}},[t._v("\n              "+t._s("Email adresa")+"\n            ")]),t._v(" "),e("i",{staticClass:"bar"})])])]),t._v(" "),e("hr"),t._v(" "),e("div",{attrs:{id:"pdf-container"}})]),t._v(" "),e("vuestic-widget-control",{directives:[{name:"show",rawName:"v-show",value:t.main,expression:"main"}],attrs:{headerText:t.Kontrola.Header,lotText:t.Kontrola.LOT,multi:t.Kontrola.Multi,datum:t.Kontrola.query_date,today:t.Kontrola.today_date}},[e("vuestic-accordion-obrada-control",t._l(t.Kontrola.Uzorci,function(a){return e("vuestic-collapse-obrada-control",{directives:[{name:"show",rawName:"v-show",value:!a.removed,expression:"!uzorak.removed"}],key:a.sid,attrs:{id:a.sid+a.aparat._id,sample:a,retest:t.save_retest,aparat:a.aparat}},[e("span",{attrs:{slot:"header",id:a.sid},slot:"header"},[t._v(t._s(a.sid))]),t._v(" "),e("div",{attrs:{slot:"body"},slot:"body"},[e("div",{staticStyle:{"line-height":"10px"}},[t._v(" ")]),t._v(" "),e("div",{staticClass:"va-row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show_table,expression:"show_table"}],staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped first-td-padding"},[e("thead",[e("tr",{attrs:{align:"middle"}},[e("td",[t._v(t._s("ANALIZA"))]),t._v(" "),e("td",[t._v(t._s("REZULTAT"))]),t._v(" "),e("td",[t._v(t._s("JEDINICA"))]),t._v(" "),e("td",[t._v(t._s("REFERENCE"))]),t._v(" "),"ODOBREN"!=a.status&&"VERIFICIRAN"!=a.status?e("td",[t._v("\n                        "+t._s("PONOVI")+"\n                      ")]):t._e(),t._v(" "),e("td")])]),t._v(" "),e("tbody",t._l(t.rezultati,function(o){return e("tr",{key:o.labassay_id,class:{"table-danger":!1,"table-success":!1,"table-warning":!1},attrs:{align:"middle"}},[e("td",{attrs:{title:o.analit}},[e("span",[t._v(t._s(o.ime))])]),t._v(" "),e("td",[e("div",{directives:[{name:"show",rawName:"v-show",value:0==o.edit,expression:"test.edit == false"}],staticStyle:{display:"inline","font-size":"14px","line-height":"4.5px"}},[e("label",[e("strong",[t._v(t._s(o.rezultat))])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1==o.edit,expression:"test.edit == true"}],staticStyle:{display:"inline"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:o.rezultat,expression:"test.rezultat"}],staticStyle:{width:"110px","font-size":"12px","line-height":"7px"},domProps:{value:o.rezultat},on:{input:function(a){a.target.composing||t.$set(o,"rezultat",a.target.value)}}})])]),t._v(" "),e("td",[t._v(t._s(o.unit))]),t._v(" "),e("td",[t._v(t._s(o.reference))]),t._v(" "),"ODOBREN"!=a.status&&"VERIFICIRAN"!=a.status&&""===o.rezultat?e("td",[e("button",{staticClass:"btn btn-pale btn-micro"},[e("span",{staticClass:"glyphicon glyphicon-ban-circle"})])]):t._e(),t._v(" "),"ODOBREN"!=a.status&&"VERIFICIRAN"!=a.status&&""!=o.rezultat?e("td",[o.retest?t._e():e("button",{staticClass:"btn btn-primary btn-micro",attrs:{id:o.labassay_id},on:{click:function(a){a.preventDefault(),t.RetestEnable(a)}}},[e("span",{staticClass:"fa fa-refresh",attrs:{id:o.labassay_id}})]),t._v(" "),o.retest?e("button",{staticClass:"btn btn-info btn-micro",attrs:{id:o.labassay_id},on:{click:function(a){a.preventDefault(),t.RetestDisable(a)}}},[e("span",{staticClass:"glyphicon glyphicon-duplicate",attrs:{id:o.labassay_id}})]):t._e()]):t._e(),t._v(" "),e("td",[e("i",{class:{"fa fa-exclamation-triangle icon-right input-icon error-icon":!1}}),t._v(" "),e("i",{class:{"fa fa-check success-icon icon-right input-icon":!1}})])])}))])])])])])})),t._v(" "),e("div",{staticStyle:{"min-height":"10px"}}),t._v(" "),e("div",[e("hr")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"}),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"btn-container"},[e("button",{staticClass:"btn btn-secondary btn-sm wizard-back pull-left",on:{click:function(a){a.preventDefault(),t.Povratak()}}},[e("span",{staticClass:"fa fa-backward"}),t._v("\n              "+t._s(" POVRATAK")+"\n            ")])])])])],1),t._v(" "),e("vuestic-modal-control-delete",{ref:"staticModalDeleteControl",attrs:{show:t.show,cancelText:"ODUSTANI",okText:"POTVRDI"},on:{"update:show":function(a){t.show=a}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("span",{staticStyle:{color:"#acb5be"}},[t._v("\n          "+t._s("Brisanje kontrolnog uzorka: ")+"\n        ")]),t._v(" "),e("span",{staticStyle:{color:"#e34a4a"}},[t._v(t._s(t.sid))])]),t._v(" "),e("div",[e("h5",[t._v(t._s("Jeste li sigurni da želite obrisati Kontrolni uzorak?"))])])]),t._v(" "),e("vuestic-modal-comment-control",{ref:"staticModalCommentControl",attrs:{show:t.show,cancelText:"ODUSTANI",okText:"POTVRDI"},on:{"update:show":function(a){t.show=a}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s("Unos komentara za Kontrolni uzorak: "+t.sid)+"\n      ")]),t._v(" "),e("div",[e("h5")])]),t._v(" "),e("vuestic-modal-mail-control",{ref:"staticModalSendMailControl",attrs:{show:t.show,cancelText:"ODUSTANI",okText:"POTVRDI"},on:{"update:show":function(a){t.show=a}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s("Slanje kontrolnih rezultata na adresu: ")+"\n        "),e("span",{staticStyle:{color:"#4ae387"}},[t._v(t._s(t.email))])]),t._v(" "),e("div",[e("h5",[t._v("\n          "+t._s("Jeste li sigurni da želite poslati kontrolne rezultate?")+"\n        ")])])]),t._v(" "),e("vuestic-modal-error-control",{ref:"staticModalError",attrs:{show:t.show,cancelText:"ZATVORI",okText:"POTVRDI"},on:{"update:show":function(a){t.show=a}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s("")+"\n        "),e("span",{staticStyle:{color:"#e34a4a"}},[t._v(t._s("404: Not Found"))])]),t._v(" "),e("div",[e("h5",[t._v(t._s("Greška prilikom čitanja kontrolnih rezultata."))])])]),t._v(" "),e("vuestic-modal-error-control",{ref:"staticModalVerifyPrivilege",attrs:{show:t.show,cancelText:"ZATVORI",okText:"POTVRDI"},on:{"update:show":function(a){t.show=a}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s("")+"\n        "),e("span",{staticStyle:{color:"#e34a4a"}},[t._v(t._s("401: Not Authorized"))])]),t._v(" "),e("div",[e("h5",[t._v(t._s("Nemate odgovarajuće privilegije."))])])])],1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"col-md-6"},[e("loading",{attrs:{active:t.isLoading,"can-cancel":!1,"on-cancel":t.onCancel,color:"#4ae387","is-full-page":t.fullPage},on:{"update:active":function(a){t.isLoading=a}}})],1),t._v(" "),e("div",{staticClass:"col-md-6"},[t._e()])])])])},s=[],n={render:o,staticRenderFns:s};a.a=n},oWB1:function(t,a,e){"use strict";var o=e("mvHQ"),s=e.n(o),n=e("7+uW"),i=e("YaEn"),r=(e("IcnI"),e("1wn0")),l=e("SWvW"),c=e("NHnr"),d=e("ZZvs"),u=e.n(d),p=e("SYh3"),f=(e.n(p),e("pyJd")),h=e("UqI+"),v=e.n(h);n.default.component("badge-column",l.default),a.a={name:"collapse-obrada-control",data:function(){return{Kontrola:{Header:"",LOT:"",Multi:"Multi",query_date:s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(8,10)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(5,7)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(0,4),today_date:s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(8,10)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(5,7)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(0,4),Uzorci:[],Aparati:[]},show:!0,main:!1,pdf:!1,email:"",verificiran:!1,save_retest:!1,show_table:!1,final_pdf:!1,samples:[],link:"",document:"",sid:"",rezultati:[],sample:{},url:"",toastText:"",toastIcon:"",toastPosition:"",toastDuration:2500,isToastFullWidth:!1,className:"",isLoading:!1,fullPage:!0}},components:{Loading:u.a,AtomSpinner:f.a},mounted:function(){var t=this;c.bus.$on("trash",function(a){t.sid=a.sid,t.$refs.staticModalDeleteControl.open()}),c.bus.$on("ControlSampleDelete",function(){t.isLoading=!0,r.q.post("control/sample/delete",{id:t.$store.state.sid,aparat:t.sample.aparat,token:t.$store.state.token,site:t.$store.state.site}).then(function(a){a.data.success&&(null===a.data.rezultat?i.a.push("/kontrole/obrada/pregled"):t.Kontrola.Uzorci.forEach(function(a){s()(a.aparat._id)===s()(t.sample.aparat._id)&&(a.removed=!0)}),c.bus.$emit("ControlSampleDeleted")),t.isLoading=!1})}),c.bus.$on("comment",function(a){t.sid=a.sid,t.$refs.staticModalCommentControl.open()}),c.bus.$on("barcode",function(a){var e=r.p+"kontrole/"+a.sid+".png";printEPL("","","","","",e,"",t.$store.state.site,void 0,void 0)}),c.bus.$on("save",function(a){t.SaveResults(t.rezultati)}),c.bus.$on("Sample",function(a){t.$store.dispatch("SetSample",a.sid),t.GetControlSample(a)}),c.bus.$on("check",function(a){t.Approve(t.rezultati)}),c.bus.$on("verify",function(a){t.Verify(t.rezultati)}),c.bus.$on("undo",function(a){t.Disapprove(t.rezultati)}),c.bus.$on("unlock",function(a){t.UnVerify(t.rezultati)}),c.bus.$on("pdf",function(a){if(a.pdf_exists){t.document=a.sid+"_"+a.aparat._id+".pdf",t.url=r.r+"nalazi/kontrole/"+a.sid+"_"+a.aparat._id+".pdf";var e={width:"100%",height:"800px"};v.a.embed(t.url,"#pdf-container",e),t.main=!1,t.pdf=!0}else t.$refs.staticModalError.open()}),c.bus.$on("Mail",function(){t.SendMail(t.email)}),c.bus.$on("Error",function(){console.warn("Greška prilikom čitanja nalaza.")})},beforeDestroy:function(){c.bus.$off("trash"),c.bus.$off("ControlSampleDelete"),c.bus.$off("comment"),c.bus.$off("barcode"),c.bus.$off("save"),c.bus.$off("check"),c.bus.$off("verify"),c.bus.$off("undo"),c.bus.$off("unlock"),c.bus.$off("pdf"),c.bus.$off("Sample"),c.bus.$off("Mail"),c.bus.$off("Error")},created:function(){var t=this;r.q.post("/control/sample/get/",{kontrola:this.$route.query.kontrola,site:this.$store.state.site,token:this.$store.state.token}).then(function(a){if(t.Kontrola.Header=a.data.kontrola.kontrola.naziv,t.Kontrola.LOT=a.data.kontrola.kontrola.lot,a.data.kontrola.kontrola.multi)t.Kontrola.Multi="Multi";else{t.Kontrola.Multi="Single"}t.Kontrola.query_date=a.data.kontrola.created_at.substring(8,10)+"."+a.data.kontrola.created_at.substring(5,7)+"."+a.data.kontrola.created_at.substring(0,4),t.Kontrola.today_date=s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(8,10)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(5,7)+"."+s()(new Date((new Date).setDate((new Date).getDate()))).substring(1,11).substring(0,4),t.Kontrola.Uzorci=[],t.Kontrola.Aparati=[],a.data.kontrola.tests.forEach(function(a){t.Kontrola.Aparati.push(a.aparat)}),t.Kontrola.Aparati=_.uniqBy(t.Kontrola.Aparati,"_id"),t.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;a.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:a.data.kontrola.kontrola,site:a.data.kontrola.site,status:n,sid:a.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:a.data.kontrola._id,removed:!1};t.Kontrola.Uzorci.push(u)}),t.main=!0})},methods:{onCancel:function(){},GetControlSample:function(t){var a=this;this.rezultati=[],r.q.post("/control/sample/get/",{kontrola:t._id,site:this.$store.state.site,token:this.$store.state.token}).then(function(e){var o={};e.data.kontrola.tests.length&&(e.data.kontrola.tests.sort(function(t,a){return t.labassay.grupa+t.labassay.grouporder==a.labassay.grupa+a.labassay.grouporder?0:+(t.labassay.grupa+t.labassay.grouporder>a.labassay.grupa+a.labassay.grouporder)||-1}),e.data.kontrola.tests.forEach(function(e){s()(t.aparat._id)==s()(e.aparat._id)&&(o={},o.ime=e.labassay.naziv,o.analit=e.labassay.analit,o._id=e._id,o.labassay_id=e.labassay._id,o.analyser=e.aparat._id,o.retest=e.retest,e.rezultat.forEach(function(t){switch(o.realizovan=!1,""!=t.rezultat_f&&(o.realizovan=!0),o.rezultat=t.rezultat_f,o.dRef=t.ref_d,o.gRef=t.ref_g,t.interpretacija){case"-":o.reference=o.dRef+" - "+o.gRef;break;case"<":o.reference="< "+o.gRef;break;case"≤":o.reference="≤ "+o.gRef;break;case">":o.reference="> "+o.gRef;break;case"≥":o.reference="≥ "+o.gRef;break;case"none":o.reference="/";break;case"neg":o.reference="negativan"}o.unit=t.jedinice_f}),"VERIFICIRAN"===e.status||"ODOBREN"===e.status?o.edit=!1:o.edit=!0,a.rezultati.push(o))}),a.sample=t,a.show_table=!0)}).then(function(){c.bus.$emit("SetClientHeight",t.sid+t.aparat._id)})},SaveResults:function(t){var a=this;this.isLoading=!0,t.forEach(function(t){t.rezultat=t.rezultat.replace(/,/g,".")}),r.q.post("/control/results/save/",{id:this.$store.state.sid,token:this.$store.state.token,site:this.$store.state.site,rezultati:t}).then(function(t){r.q.post("/control/sample/get/",{kontrola:a.$route.query.kontrola,site:a.$store.state.site,token:a.$store.state.token}).then(function(t){a.Kontrola.Uzorci=[],a.Kontrola.Aparati=[],t.data.kontrola.tests.forEach(function(t){a.Kontrola.Aparati.push(t.aparat)}),a.Kontrola.Aparati=_.uniqBy(a.Kontrola.Aparati,"_id"),a.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;t.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:t.data.kontrola.kontrola,site:t.data.kontrola.site,status:n,sid:t.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:t.data.kontrola._id,removed:!1};a.Kontrola.Uzorci.push(u)}),a.main=!0}),a.isLoading=!1})},Povratak:function(){i.a.push("/kontrole/obrada/pregled/?sekcija=Kontrolni uzorci")},Nazad:function(){this.main=!0,this.pdf=!1},Email:function(t){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)},RetestEnable:function(t){var a=this;this.isLoading=!0,this.rezultati.forEach(function(a){a.labassay_id===t.target.id&&(a.retest=!0)}),r.q.post("control/retest/enable",{id:this.$store.state.sid,labassay:t.target.id,site:this.$store.state.site,token:this.$store.state.token}).then(function(e){e.data.success&&a.rezultati.forEach(function(a){a.labassay_id===t.target.id&&(a.retest=!0)})}),this.isLoading=!1},RetestDisable:function(t){var a=this;this.isLoading=!0,this.rezultati.forEach(function(a){a.labassay_id===t.target.id&&(a.retest=!1)}),r.q.post("control/retest/disable",{id:this.$store.state.sid,labassay:t.target.id,site:this.$store.state.site,token:this.$store.state.token}).then(function(e){e.data.success&&a.rezultati.forEach(function(a){a.labassay_id===t.target.id&&(a.retest=!1)}),a.isLoading=!1})},Approve:function(t){var a=this;this.isLoading=!0,this.rezultati.forEach(function(t){t.edit=!1,t.retest=!1}),t.forEach(function(t){t.rezultat=t.rezultat.replace(/,/g,".")}),r.q.post("/control/results/approve/",{id:this.$store.state.sid,token:this.$store.state.token,site:this.$store.state.site,rezultati:t}).then(function(t){r.q.post("/control/sample/get/",{kontrola:a.$route.query.kontrola,site:a.$store.state.site,token:a.$store.state.token}).then(function(t){a.sample.status="ODOBREN",a.Kontrola.Uzorci=[],a.Kontrola.Aparati=[],t.data.kontrola.tests.forEach(function(t){a.Kontrola.Aparati.push(t.aparat)}),a.Kontrola.Aparati=_.uniqBy(a.Kontrola.Aparati,"_id"),a.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;t.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:t.data.kontrola.kontrola,site:t.data.kontrola.site,status:n,sid:t.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:t.data.kontrola._id,removed:!1};a.Kontrola.Uzorci.push(u)}),a.main=!0})}).then(function(t){r.q.post("control/nalazi/create",{id:a.$store.state.sid,aparat:a.sample.aparat,token:a.$store.state.token,site:a.$store.state.site,location:"/kontrole"}).then(function(t){a.isLoading=!1})})},Disapprove:function(t){var a=this;this.isLoading=!0,this.rezultati.forEach(function(t){t.edit=!0}),t.forEach(function(t){t.rezultat=t.rezultat.replace(/,/g,".")}),r.q.post("/control/results/disapprove/",{id:this.$store.state.sid,token:this.$store.state.token,site:this.$store.state.site,rezultati:t}).then(function(t){r.q.post("/control/sample/get/",{kontrola:a.$route.query.kontrola,site:a.$store.state.site,token:a.$store.state.token}).then(function(t){a.Kontrola.Uzorci=[],a.Kontrola.Aparati=[],t.data.kontrola.tests.forEach(function(t){a.Kontrola.Aparati.push(t.aparat)}),a.Kontrola.Aparati=_.uniqBy(a.Kontrola.Aparati,"_id"),a.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;t.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:t.data.kontrola.kontrola,site:t.data.kontrola.site,status:n,sid:t.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:t.data.kontrola._id,removed:!1};a.Kontrola.Uzorci.push(u)}),a.main=!0}),a.isLoading=!1})},MailDialog:function(){this.$refs.staticModalSendMailControl.open()},SendMail:function(t){var a=this;this.isLoading=!0,r.q.post("control/nalazi/mail",{token:this.$store.state.token,site:this.$store.state.site,id:this.$store.state.sid,aparat:this.sample.aparat,email:t,input:"kontrole/",output:"emails/",doc:this.document}).then(function(t){a.isLoading=!1,t.data.success?(a.toastText="Nalaz uspješno poslan.",a.toastIcon="fa-check",a.toastPosition="top-right",a.className="vuestic-toast-primary",a.showToast(a.toastText,{icon:a.toastIcon,position:a.toastPosition,duration:2500,fullWidth:a.false,className:a.className})):(a.toastText="Greška prilikom slanja nalaza!",a.toastIcon="fa-remove",a.toastPosition="top-right",a.className="vuestic-toast-danger",a.showToast(a.toastText,{icon:a.toastIcon,position:a.toastPosition,duration:2500,fullWidth:a.false,className:a.className}))})},Verify:function(t){var a=this;this.$store.state.access.verify?(this.isLoading=!0,r.q.post("/control/results/verify/",{id:this.$store.state.sid,aparat:this.sample.aparat,token:this.$store.state.token,site:this.$store.state.site,rezultati:t}).then(function(t){r.q.post("/control/sample/get/",{kontrola:a.$route.query.kontrola,site:a.$store.state.site,token:a.$store.state.token}).then(function(t){a.Kontrola.Uzorci=[],a.Kontrola.Aparati=[],t.data.kontrola.tests.forEach(function(t){a.Kontrola.Aparati.push(t.aparat)}),a.Kontrola.Aparati=_.uniqBy(a.Kontrola.Aparati,"_id"),a.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;t.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:t.data.kontrola.kontrola,site:t.data.kontrola.site,status:n,sid:t.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:t.data.kontrola._id,removed:!1};a.Kontrola.Uzorci.push(u)}),a.main=!0}),a.isLoading=!1})):this.$refs.staticModalVerifyPrivilege.open()},UnVerify:function(t){var a=this;this.$store.state.access.verify?(this.isLoading=!0,r.q.post("/control/results/unverify/",{id:this.$store.state.sid,aparat:this.sample.aparat,token:this.$store.state.token,site:this.$store.state.site,rezultati:t}).then(function(t){r.q.post("/control/sample/get/",{kontrola:a.$route.query.kontrola,site:a.$store.state.site,token:a.$store.state.token}).then(function(t){a.Kontrola.Uzorci=[],a.Kontrola.Aparati=[],t.data.kontrola.tests.forEach(function(t){a.Kontrola.Aparati.push(t.aparat)}),a.Kontrola.Aparati=_.uniqBy(a.Kontrola.Aparati,"_id"),a.Kontrola.Aparati.forEach(function(e){var o=[],n="ZAPRIMLJEN",i=0,r=0,l=0,c=0,d=0;t.data.kontrola.tests.forEach(function(t){if(s()(e._id)==s()(t.aparat._id)){switch(t.status){case"ZAPRIMLJEN":i++;break;case"U OBRADI":r++;break;case"REALIZOVAN":l++;break;case"ODOBREN":c++;break;case"VERIFICIRAN":d++}o.push(t)}}),n=d==o.length?"VERIFICIRAN":c==o.length?"ODOBREN":i==o.length?"ZAPRIMLJEN":l==o.length?"REALIZOVAN":"U OBRADI";var u={aparat:e,testovi:o,kontrola:t.data.kontrola.kontrola,site:t.data.kontrola.site,status:n,sid:t.data.kontrola.id,pdf_exists:!0,tip:"Nema podataka.",_id:t.data.kontrola._id,removed:!1};a.Kontrola.Uzorci.push(u)}),a.main=!0}),a.isLoading=!1})):this.$refs.staticModalVerifyPrivilege.open()}}}},sILS:function(t,a,e){a=t.exports=e("FZ+f")(!0),a.push([t.i,".collapse-page__content[data-v-7be5bf00]{padding:2rem}.collapse-page__content__title[data-v-7be5bf00]{font-size:1.375rem;font-weight:700}.icon-bar a[data-v-7be5bf00]{color:#fff;text-decoration:none}.icon-bar a[data-v-7be5bf00]:hover{color:#4ae387}i[data-v-7be5bf00]:hover{color:#4ae387!important}.circle[data-v-7be5bf00]{width:1rem;opacity:.5;height:1rem;border-radius:50%;display:inline-block}","",{version:3,sources:["C:/Users/atom/Desktop/atom.podrska@gmail/BioLAB/biolab_client/src/components/kontrole/pregled/Obrada.vue"],names:[],mappings:"AACA,yCACE,YAAc,CACf,AACD,gDACI,mBAAoB,AACpB,eAAkB,CACrB,AACD,6BACE,WAAY,AACZ,oBAAsB,CACvB,AACD,mCACE,aAAe,CAChB,AACD,yBACE,uBAA0B,CAC3B,AACD,yBACE,WAAY,AACZ,WAAa,AACb,YAAa,AACb,kBAAmB,AACnB,oBAAsB,CACvB",file:"Obrada.vue",sourcesContent:["\n.collapse-page__content[data-v-7be5bf00] {\n  padding: 2rem;\n}\n.collapse-page__content__title[data-v-7be5bf00] {\n    font-size: 1.375rem;\n    font-weight: bold;\n}\n.icon-bar a[data-v-7be5bf00] {\n  color: #fff;\n  text-decoration: none;\n}\n.icon-bar a[data-v-7be5bf00]:hover {\n  color: #4ae387;\n}\ni[data-v-7be5bf00]:hover {\n  color: #4ae387 !important;\n}\n.circle[data-v-7be5bf00] {\n  width: 1rem;\n  opacity: 0.5;\n  height: 1rem;\n  border-radius: 50%;\n  display: inline-block;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=34.05e8e72f170a4fab7e16.js.map